<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <title>PHPUnit Manual &#8211; Chapter 3. Installing PHPUnit</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/highlight.css" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700|Source+Code+Pro:400,700' rel='stylesheet' type='text/css'>
  <!--[if lt IE 9]><script src="js/html5.js"></script><![endif]-->
 </head>
 <body>
  
  <div class="container">
   <div class="row">
    <div style='padding: 1.5em'>
     <div class="row">
      <div class="col-md-1 pull-left prev-nav"><a accesskey="p" href="goals.html">Prev</a></div>
      <div class="col-md-1 pull-right next-nav"><a accesskey="n" href="writing-tests-for-phpunit.html">Next</a></div>
     </div>
<div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="installation"></a>Chapter 3. Installing PHPUnit</h1></div></div></div><div class="alert alert-info"><h3 class="title">Note</h3><p>
      PHPUnit 3.7 requires PHP 5.3.3; using the latest version of PHP is highly
      recommended.
    </p><p>
      For code coverage support, <a class="ulink" href="http://xdebug.org/" target="_top">Xdebug</a>
      2.1.3 is required; using the latest version of Xdebug is highly
      recommended.
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="installation.phar"></a>PHP Archive (PHAR)</h2></div></div></div><p>
      The easiest way to obtain PHPUnit is to download a <a class="ulink" href="http://php.net/phar" target="_top">PHP Archive (PHAR)</a> that has all required
      (as well as some optional) dependencies of PHPUnit bundled in a single
      file:
    </p><pre class="screen"><strong class="userinput"><code>wget https://phar.phpunit.de/phpunit.phar</code></strong>
<strong class="userinput"><code>chmod +x phpunit.phar</code></strong>
<strong class="userinput"><code>mv phpunit.phar /usr/local/bin/phpunit</code></strong></pre><p>
      You can also immediately use the PHAR after you have downloaded it, of
      course:
    </p><pre class="screen"><strong class="userinput"><code>wget https://phar.phpunit.de/phpunit.phar</code></strong>
<strong class="userinput"><code>php phpunit.phar</code></strong></pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="installation.composer"></a>Composer</h2></div></div></div><p>
      Simply add a dependency on <code class="literal">phpunit/phpunit</code> to your
      project's <code class="literal">composer.json</code> file if you use
      <a class="ulink" href="http://getcomposer.org/" target="_top">Composer</a> to manage the
      dependencies of your project. Here is a minimal example of a
      <code class="literal">composer.json</code> file that just defines a development-time
      dependency on PHPUnit 3.7:
    </p><pre class="programlisting">{
    "require-dev": {
        "phpunit/phpunit": "3.7.*"
    }
}</pre><p>
      For a system-wide installation via Composer, you can run:
    </p><pre class="screen"><strong class="userinput"><code>composer global require 'phpunit/phpunit=3.7.*'</code></strong></pre><p>
      Make sure you have <code class="literal">~/.composer/vendor/bin/</code> in your
      path.
    </p><div class="alert alert-info"><h3 class="title">Note</h3><p>
        Support for Composer and PHP Archive (PHAR) was added in PHPUnit 3.7
        (and is known to be stable since PHPUnit 3.7.5). Earlier releases of
        PHPUnit are not available through these distribution channels.
      </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="installation.pear"></a>PEAR</h2></div></div></div><p>
      The following two commands (which you may have to run as
      <code class="literal">root</code>) are all that is required to install PHPUnit using
      the <a class="ulink" href="http://pear.php.net/manual/en/guide.users.commandline.cli.php" target="_top">PEAR Installer</a>:
    </p><pre class="screen"><strong class="userinput"><code>pear config-set auto_discover 1</code></strong>
<strong class="userinput"><code>pear install pear.phpunit.de/PHPUnit</code></strong></pre><div class="alert alert-error"><h3 class="title">Caution</h3><p>
        Depending on your OS distribution and/or your PHP environment, you may
        need to install PEAR or update your existing PEAR installation before
        you can proceed with the instructions in this section.
      </p><p>
        <strong class="userinput"><code>sudo pear upgrade PEAR</code></strong> usually suffices to
        upgrade an existing PEAR installation. The <a class="ulink" href="http://pear.php.net/manual/en/installation.getting.php" target="_top">PEAR Manual</a>
        explains how to perform a fresh installation of PEAR.
      </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="installation.optional-packages"></a>Optional packages</h2></div></div></div><p>
      The following optional packages are available:
    </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
          <code class="literal">DbUnit</code>
        </span></dt><dd><p>
            DbUnit port for PHP/PHPUnit to support database interaction testing.
          </p><p>
            This package can be installed via PEAR using the following command:
          </p><pre class="screen"><strong class="userinput"><code>pear install phpunit/DbUnit</code></strong></pre><p>
            This package can be installed via Composer by adding the following
            <code class="literal">"require-dev"</code> dependency:
          </p><pre class="screen"><strong class="userinput"><code>"phpunit/dbunit": "&gt;=1.2"</code></strong></pre></dd><dt><span class="term">
          <code class="literal">PHP_Invoker</code>
        </span></dt><dd><p>
            A utility class for invoking callables with a timeout. This package is
            required to enforce test timeouts in strict mode.
          </p><p>
            This package can be installed using the following command:
          </p><pre class="screen"><strong class="userinput"><code>pear install phpunit/PHP_Invoker</code></strong></pre><p>
            This package can be installed via Composer by adding the following
            <code class="literal">"require-dev"</code> dependency:
          </p><pre class="screen"><strong class="userinput"><code>"phpunit/php-invoker": "*"</code></strong></pre></dd><dt><span class="term">
          <code class="literal">PHPUnit_Selenium</code>
        </span></dt><dd><p>
            Selenium RC integration for PHPUnit.
          </p><p>
            This package can be installed via PEAR using the following command:
          </p><pre class="screen"><strong class="userinput"><code>pear install phpunit/PHPUnit_Selenium</code></strong></pre><p>
            This package can be installed via Composer by adding the following
            <code class="literal">"require-dev"</code> dependency:
          </p><pre class="screen"><strong class="userinput"><code>"phpunit/phpunit-selenium": "&gt;=1.2"</code></strong></pre></dd><dt><span class="term">
          <code class="literal">PHPUnit_Story</code>
        </span></dt><dd><p>
            Story-based test runner for Behavior-Driven Development with PHPUnit.
          </p><p>
            This package can be installed via PEAR using the following command:
          </p><pre class="screen"><strong class="userinput"><code>pear install phpunit/PHPUnit_Story</code></strong></pre><p>
            This package can be installed via Composer by adding the following
            <code class="literal">"require-dev"</code> dependency:
          </p><pre class="screen"><strong class="userinput"><code>"phpunit/phpunit-story": "*"</code></strong></pre></dd><dt><span class="term">
          <code class="literal">PHPUnit_SkeletonGenerator</code>
        </span></dt><dd><p>
            Tool that can generate skeleton test classes from production code
            classes and vice versa.
          </p><p>
            This package can be installed using the following command:
          </p><pre class="screen"><strong class="userinput"><code>pear install phpunit/PHPUnit_SkeletonGenerator</code></strong></pre></dd><dt><span class="term">
          <code class="literal">PHPUnit_TestListener_DBUS</code>
        </span></dt><dd><p>
            A TestListener that sends events to DBUS.
          </p><p>
            This package can be installed using the following command:
          </p><pre class="screen"><strong class="userinput"><code>pear install phpunit/PHPUnit_TestListener_DBUS</code></strong></pre></dd><dt><span class="term">
          <code class="literal">PHPUnit_TestListener_XHProf</code>
        </span></dt><dd><p>
            A TestListener that uses XHProf for automated profiling of the tested code.
          </p><p>
            This package can be installed using the following command:
          </p><pre class="screen"><strong class="userinput"><code>pear install phpunit/PHPUnit_TestListener_XHProf</code></strong></pre></dd><dt><span class="term">
          <code class="literal">PHPUnit_TicketListener_Fogbugz</code>
        </span></dt><dd><p>
            A ticket listener that interacts with the Fogbugz issue API.
          </p><p>
            This package can be installed using the following command:
          </p><pre class="screen"><strong class="userinput"><code>pear install phpunit/PHPUnit_TicketListener_Fogbugz</code></strong></pre></dd><dt><span class="term">
          <code class="literal">PHPUnit_TicketListener_GitHub</code>
        </span></dt><dd><p>
            A ticket listener that interacts with the GitHub issue API.
          </p><p>
            This package can be installed using the following command:
          </p><pre class="screen"><strong class="userinput"><code>pear install phpunit/PHPUnit_TicketListener_GitHub</code></strong></pre></dd><dt><span class="term">
          <code class="literal">PHPUnit_TicketListener_GoogleCode</code>
        </span></dt><dd><p>
            A ticket listener that interacts with the Google Code issue API.
          </p><p>
            This package can be installed using the following command:
          </p><pre class="screen"><strong class="userinput"><code>pear install phpunit/PHPUnit_TicketListener_GoogleCode</code></strong></pre></dd><dt><span class="term">
          <code class="literal">PHPUnit_TicketListener_Trac</code>
        </span></dt><dd><p>
            A ticket listener that interacts with the Trac issue API.
          </p><p>
            This package can be installed using the following command:
          </p><pre class="screen"><strong class="userinput"><code>pear install phpunit/PHPUnit_TicketListener_Trac</code></strong></pre></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="installing.upgrading"></a>Upgrading</h2></div></div></div><p>
      This section serves as a collection of minor BC issues that one might
      run into when upgrading from PHPUnit 3.6 to PHPUnit 3.7.
    </p><p>
      The upgrade should be rather easy and work without any issues as it was
      tested against all major Open Source frameworks and there was not a
      single problem for them. Still every project is different and if you
      did not get around to trying one of the release candidates and have ran
      into an issue this document might provide some help.
    </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="strong"><strong>Removed deprecated OutputTestCase</strong></span></span></dt><dd><p>
            The class <code class="literal">PHPUnit_Extensions_OutputTestCase</code> has
            been removed. PHPUnit 3.6 issued a deprecation notice when it was
            used. To see how output can now be tested look into
            <a class="xref" href="writing-tests-for-phpunit.html#writing-tests-for-phpunit.output" title="Testing Output">the section called “Testing Output”</a>.
          </p></dd><dt><span class="term"><span class="strong"><strong>Current working directory will be restored after each test case</strong></span></span></dt><dd><p>
            If a test changes the current working directory
            (<code class="literal">cwd</code>) PHPUnit ran into issues when generating
            code coverage output. Now that the cwd is restored after each
            test case you might find that one of your tests depended on
            another test changing the cwd. Something that isn't desirable
            anyways and should be easy to fix.
          </p></dd><dt><span class="term"><span class="strong"><strong>Test listeners trigger one autoload call</strong></span></span></dt><dd><p>
            When using custom test listeners as described in
            <a class="xref" href="appendixes.configuration.html#appendixes.configuration.test-listeners" title="Test Listeners">the section called “Test Listeners”</a> PHPUnit
            silently ignored missing test listeners and it was quite hard to
            debug that issues for the user. Now one autoload call will be
            triggered trying to locate the class. If your autoloader produces
            an error when it doesn't find a test listener you might run into an
            issue here. Removing the listener or making sure it's loaded in your
            <code class="literal">bootstrap.php</code> will solve this.
          </p></dd><dt><span class="term"><span class="strong"><strong>Parameters for mock objects do not get cloned anymore</strong></span></span></dt><dd><p>
            Previously all object parameters where cloned when mocking.
            This lead to issues when testing trying to check whether the same
            object was passed to method or not and other problem with
            uncloneable objects. As a long standing feature request by many
            this behavior was changed.
            <a class="xref" href="test-doubles.html#test-doubles.mock-objects.examples.clone-object-parameters-usecase.php" title="Example 10.15: Testing that a method gets called once and with the identical object as was passed">Example 10.15</a>
            shows where the new implementation could be useful.
            <a class="xref" href="test-doubles.html#test-doubles.mock-objects.examples.enable-clone-object-parameters.php" title="Example 10.16: Create a mock object with cloning parameters enabled">Example 10.16</a>
            shows how to switch back to previous behavior.
          </p></dd><dt><span class="term"><span class="strong"><strong>
          <code class="literal">addUncoveredFilesFromWhitelist</code>
          was removed in favor of
          <code class="literal">processUncoveredFilesFromWhitelist</code></strong></span>
        </span></dt><dd><p>
            When generating code coverage and using
            <code class="literal">&lt;whitelist addUncoveredFilesFromWhitelist="true"&gt;</code>
            all uncovered files got included by PHPUnit. This was an issue for
            people with executable code in those files. PHPUnit will now scan
            the file and guess what code is executable and what code is not
            without including it. This might lead to different code coverage
            reports.
          </p><p>
            To switch back to the old behavior the setting
            <code class="literal">&lt;whitelist processUncoveredFilesFromWhitelist="true"&gt;</code>
            can be used. If you want the behavior with PHPUnit 3.6. and 3.7.
            it is possible to use both settings for a while.
          </p></dd><dt><span class="term"><span class="strong"><strong>
          Default value of <code class="literal">cacheTokens</code> changed to
          <code class="literal">false</code></strong></span>
        </span></dt><dd><p>
            Since PHPUnit <code class="literal">3.7.2</code> we turned off the caching
            of tokenized files by default. When processing code coverage
            reports for big projects this cache consumed a lot of memory and
            due to the change in whitelist behavior it was problematic for
            folks with code bases with more than a couple of thousand classes.
          </p><p>
            If your project is smaller or you have enough memory you will get
            a runtime benefit by adding <code class="literal">cacheTokens="true"</code>
            to your <code class="literal">phpunit.xml</code> file. See
            <a class="xref" href="appendixes.configuration.html#appendixes.configuration.phpunit" title="PHPUnit">the section called “PHPUnit”</a>.
          </p></dd></dl></div></div></div>
     <div class="row">
      <div class="col-md-1 pull-left prev-nav"><a accesskey="p" href="goals.html">Prev</a></div>
      <div class="col-md-1 pull-right next-nav"><a accesskey="n" href="writing-tests-for-phpunit.html">Next</a></div>
     </div>
<div class="row"><div class="col-md-2"></div><div class="col-md-8"><div class="alert alert-info" style="text-align: center;">Please <a href="https://github.com/sebastianbergmann/phpunit-documentation/issues">open a ticket</a> on GitHub to suggest improvements to this page. Thanks!</div></div><div class="col-md-2"></div></div>
    </div>
   </div>
   <hr/>
   <footer>
    <p><a href="appendixes.copyright.html">Copyright</a> &copy; 2005-2014 <a href="http://sebastian-bergmann.de/">Sebastian Bergmann</a>.</p>
   </footer>
  </div>
  <script src="js/jquery.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/highlight.pack.js"></script>
  <script type="text/javascript">
  $(document).ready(function() { $('pre.programlisting').each(function(i, e) {hljs.highlightBlock(e)}); });

  var _paq = _paq || [];
  _paq.push(["trackPageView"]);
  _paq.push(["enableLinkTracking"]);

  (function() {
    var u=(("https:" == document.location.protocol) ? "https" : "http") + "://piwik.sebastian-bergmann.de/";
    _paq.push(["setTrackerUrl", u+"piwik.php"]);
    _paq.push(["setSiteId", "2"]);
    var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
    g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
  })();
  </script>
 </body>
</html>
